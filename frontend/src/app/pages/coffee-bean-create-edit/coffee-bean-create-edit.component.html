<app-container>
  <mat-card>
    <mat-card-content>
      <h1>{{ heading }}</h1>
      <form
        class="createEditBeanForm"
        [formGroup]="createEditBeanForm"
        (submit)="onSubmit()">
        <mat-form-field>
          <mat-label>Name</mat-label>
          <input
            placeholder="Name"
            required
            matInput
            formControlName="name"
            [(ngModel)]="coffeeBeanDto.name" />
          <mat-error *ngIf="createEditBeanForm.controls.name.invalid"
            >{{ getErrorMessage() }}
          </mat-error>
        </mat-form-field>
        <mat-form-field>
          <mat-label>Price/kg</mat-label>
          <input
            placeholder="0.00"
            matInput
            type="number"
            step="0.01"
            formControlName="price"
            [(ngModel)]="coffeeBeanDto.price" />
          <span matTextPrefix>â‚¬&nbsp;</span>
          <mat-error *ngIf="createEditBeanForm.controls.price.invalid"
            >Price cannot be negative</mat-error
          >
        </mat-form-field>
        <mat-form-field>
          <mat-label>Origin of the Coffee</mat-label>
          <input
            placeholder="Origin"
            matInput
            formControlName="origin"
            [(ngModel)]="coffeeBeanDto.origin" />
          <mat-error *ngIf="createEditBeanForm.controls.origin.invalid"
            >Origin is too long!</mat-error
          >
        </mat-form-field>
        <mat-form-field>
          <mat-label>Height (in meters) where coffee was grown </mat-label>
          <input
            placeholder="3000 m"
            matInput
            type="number"
            min="0"
            formControlName="height"
            [(ngModel)]="coffeeBeanDto.height" />
          <mat-error *ngIf="createEditBeanForm.controls.height.invalid"
            >Height is too great!</mat-error
          >
        </mat-form-field>
        <mat-form-field>
          <mat-label>Roast</mat-label>
          <select
            matNativeControl
            [(ngModel)]="coffeeBeanDto.coffeeRoast"
            formControlName="coffeeRoast">
            <option value=""></option>
            <option value="LIGHT">Light</option>
            <option value="MEDIUM">Medium</option>
            <option value="DARK">Dark</option>
          </select>
        </mat-form-field>
        <mat-form-field>
          <mat-label>Description</mat-label>
          <textarea
            matInput
            [(ngModel)]="coffeeBeanDto.description"
            formControlName="description"></textarea>
          <mat-error *ngIf="createEditBeanForm.controls.description.invalid"
            >Description is too long!</mat-error
          >
        </mat-form-field>
        <mat-form-field>
          <mat-label>Bean Blend</mat-label>
          <input
            placeholder="Bean Blend"
            matInput
            formControlName="beanBlend"
            [(ngModel)]="coffeeBeanDto.beanBlend" />
          <mat-error *ngIf="createEditBeanForm.controls.beanBlend.invalid"
            >Bean blend is too long!</mat-error
          >
        </mat-form-field>
        <mat-form-field>
          <mat-label>URL (e.g. shop)</mat-label>
          <input
            placeholder="url"
            matInput
            formControlName="url"
            [(ngModel)]="coffeeBeanDto.urlToCoffee" />
          <mat-error *ngIf="createEditBeanForm.controls.url.invalid"
            >URL is too long!</mat-error
          >
        </mat-form-field>
        <mat-form-field>
          <mat-label>Coffee Strength</mat-label>
          <input
            placeholder="Coffee Strength"
            matInput
            formControlName="coffeeStrength"
            [(ngModel)]="coffeeBeanDto.coffeeStrength" />
          <mat-error *ngIf="createEditBeanForm.controls.coffeeStrength.invalid"
            >Coffee strength is too long!</mat-error
          >
        </mat-form-field>
        <button type="submit" mat-raised-button color="primary">
          {{ submitButtonText }}
        </button>
        <button
          class="delete"
          type="submit"
          *ngIf="!modeIsCreate"
          mat-raised-button
          color="primary"
          [routerLink]="['/coffee/' + coffeeBeanDto.id + '/delete']">
          Delete
        </button>
      </form>
    </mat-card-content>
  </mat-card>
</app-container>
